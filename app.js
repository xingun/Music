const data = [
    {
     song: 'lời đường mật',
     singer: 'lyly ft hiếu thứ hai',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - LỜI ĐƯỜNG MẬT LYLY ft HIEUTHUHAI Remix.mp3'
    },
    {
     song: 'Anh Sẽ Đón Em',
     singer: 'Nguyên ft Trang',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Anh Sẽ Đón Em  Nguyên ft TrangCukak Remix  Audio Lyrics.mp3 '
    },
    {
     song: 'Bỏ Em Vào Balo',
     singer: 'Tân Trần',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Bỏ Em Vào Balo Ming Guang Remix  Tân Trần  Nhạc Remix Tik Tok 2021.mp3 '
    },
    {
     song: 'Chạy Khỏi Thế Giới Này',
     singer: 'Da LAB ft Phương Ly',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Chạy Khỏi Thế Giới Này  Da LAB ft Phương LyCukak Remix Audio Lyric Video.mp3  '
    },
    {
     song: 'Có Em Bên Đời',
     singer: 'Hồ Văn Quý x NamDuc',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Có Em Bên Đời RIN Music Remix  Hồ Văn Quý x NamDuc  Giờ Thì Mình Lại Ước Ao Có Em Bên Đời Remix.mp3'
    },
    {
     song: 'Công Chúa Bong Bóng',
     singer: 'An Vũ',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Công Chúa Bong Bóng  An Vũ x AnhVuRemix Version by 1 9 6 7 Audio Lyric Video.mp3  '
    },
    {
     song: 'Cổ Tích',
     singer: 'JSOL',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Cô Tich  JSOLCukak Remix Audio Lyrics Video.mp3 '
    },
    {
     song: 'Cưới Thôi',
     singer: 'Masew x Masiu x B Ray x TAP ',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Cưới Thôi  Masew x Masiu x B Ray x TAP  Lyrics Audio .mp3 '
     },
     {
     song: 'Cứ Nói Yêu Lần Này',
     singer: 'Lil Zpoet',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Cứ Nói Yêu Lần Này Speed Up  Lil ZpoetCukak Remix Audio Lyrics Video.mp3  '
    },
    {
     song: 'Dịu Dàng Em Đến',
     singer: 'Erik',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Dịu Dàng Em Đến  ERIKCukak Remix Audio Lyrics.mp3  '
    },
    {
     song: 'Em Là Nhất',
     singer: 'Kis x Hoàng KayLee',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Em Là Nhất  kis x Hoàng KayLee x YahyCukak Remix  Audio Lyrics Video.mp3  '
    },
    {
     song: 'Em Thích',
     singer: 'Sean ft Lửa',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Em Thích Orinn Remix  Sean ft Lửa  Nhac Tre Remix TikTok Gây Nghiện Hay Nhất 2021.mp3  '
    },
    {
     song: 'Getcha Love',
     singer: 'Duniverse ft Mable & VDT & SnowzyBoy ',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Getcha Love  Duniverse ft Mable  VDT  SnowzyBoy x Nhựt TrườngRemix Version by 1 9 6 7 Lyrics.mp3  '
    },
    {
     song: 'Gu',
     singer: 'Freaky ft Seachains',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Gu  Freaky ft SeachainsCukak Remix Audio Lyrics.mp3  '
    },
    {
     song: 'Honey',
     singer: 'AnhVu ft Toann',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Honẻy  AnhVu ft ToannRemix Version by 1 9 6 7 Audio Lyrics.mp3  '
    },
    {
     song: 'Anh Yêu Em Rồi Đấy',
     singer: 'HuyR ft Dickator',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - HuyR ft Dickator  Anh Yêu Em Rồi Đấy  Bomman  Minh Nghis Wedding Official MV.mp3 '
    },
    {
     song: 'Hơn Cả Mây Trời',
     singer: 'Như Việt',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - HƠN CẢ MÂY TRỜI  Như Việt x Ciray Remix  Nhiều Hơn Cả Mây Trời Cả Cuộc Đời Không Ai Bằng Anh Đâu.mp3 '
    },
    {
     song: 'Iu Em Thật Low',
     singer: 'Shartnuss ft LXH',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Iu Em Thật Low  Shartnuss ft LXH x AnhVuRemix Version by 1 9 6 7 Audio Lyrics.mp3 '
    },
    {
     song: 'Iu Rùi Sẽ Bik',
     singer: 'HauKong',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Iu Rui Se Bik  HaukongCukak Remix Official Lyrics Video.mp3  '
    }, 
    {
     song: 'Love U 300.000 Kms',
     singer: 'Drum7',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Luv U 300000 Kms  Drum7Cukak Remix Audio Lyrics Video.mp3  '
    },
    {
     song: 'Mây Hồng Đưa Lối',
     singer: 'DATKAA X Prod QT BEATZ x CiiN',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - MÂY HỒNG ĐƯA LỐI  DATKAA x Prod QT BEATZ x CiiN  OFFICIAL MUSIC VIDEO.mp3  '
    },
    {
     song: 'Mặt Mộc',
     singer: 'Phạm Nguyên Ngọc x VAnh x Ân Nhi',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Mặt Mộc RIN Music Remix  Pham Nguyên Ngoc x VAnh x Ân Nhi  Chẳng Tìm Đâu Ra Một Người Như Thế.mp3  '
    },
    {
     song: 'Ngày Em Đến',
     singer: 'Lil Zpoet',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Ngày Em Đến Orinn Remix  Lil Z Poet  Nhạc Trẻ Remix Hot Tik Tok Gây Nghiện 2022.mp3  '
    },
    {
     song: 'Ngày Đầu Tiên',
     singer: 'Đức Phúc',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Ngày Đầu Tiên  Đức Phúc x AnhVuRemix Version by 1 9 6 7 Audio Lyrics.mp3  '
    },{
     song: 'Nắm Bàn Tay Say Cả Đời',
     singer: 'Đạt Trần x Nâu Ft ELBI',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Năm Ban Tay Say Ca Đơi  Đat Trân ft NâuCukak Remix  Audio Lyrics.mp3  '
    }, 
    {
     song: 'Nụ Cười Em Là Nắng',
     singer: 'Green',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Nụ Cười Em Là Nắng RIN Music Remix  Green  Nụ Cười Em Giờ Là Nắng Cho Anh Thêm Bao Mơ Màng Remix.mp3  '
    },
    {
     song: 'Phỏng Lài Em',
     singer: 'Daduc ft Dipper',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Phỏng Lài Em Orinn Remix  Daduc ft Dipper  Nhạc Trẻ Remix Tik Tok Gây Nghiện Cực Hot 2022.mp3  '
    },
    {
     song: 'Precious',
     singer: 'Daduc ft Kiper',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - PRECIOUS  DADUC ft KIPER TCukak Remix  Official Lyrics Video.mp3  '
    },
    {
     song: 'Vũ Trụ Trong Anh',
     singer: 'HOÀNG lAN x SINIKE',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - REMIX VŨ TRỤ TRONG ANH  HOÀNG LAN x SINIKE.mp3  '
    },
    {
     song: 'Rung Động',
     singer: 'Dương Edwar x Vũ Khắc Anh',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Rung Động RIN Music Remix  Dương Edward x Vũ Khắc Anh  Em Có Muốn Cùng Anh Đi Qua Bao Bão Giông.mp3  '
    },
    {
     song: 'See Tình',
     singer: 'Hoàng Thùy Linh',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - See Tinh  Hoang Thuy Linh x AnhVuRemix Version by 1 9 6 7 Audio Lyrics Video.mp3  '
    },
    {
     song: 'Đại Diện Cho Trái Tim',
     singer: 'SOUTHALID',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Speed up Version SOUTHALID  ĐẠI DIỆN CHO TRÁI TIM FEAT MAL.mp3  '
    },
    {
     song: 'Strawberry',
     singer: 'CM1X, Cammie, Nalo ',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Strawberry  CM1X Cammie Nalo Orinn x Jena Remix Remix TikTok 2022.mp3  '
    },
    {
     song: 'Sẵn Sàng Yêu Em Đi Thôi',
     singer: 'Woni x Minh Tú',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Sẵn Sàng Yêu Em Đi Thôi Remix  Đại Mèo Remix Woni x Minh Tú  HOT TIK TOK Nếu anh muốn say bia .mp3  '
    },
    {
     song: 'Thế Giới Của Anh',
     singer: 'Bùi Tuấn Ngọc',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - THẾ GIỚI CỦA ANH  OFFICIAL MV FULL  BÙI TUẤN NGỌC.mp3  '
    },
    {
     song: 'Tình Ca Tình Ta',
     singer: 'Kis x AnhVu',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Tình Ca Tình Ta  kis x AnhVuRemix Version by 1 9 6 7 Official Lyrics Video.mp3  '
    },
    {
     song: 'Tình Ka Ngọt Ngào',
     singer: 'Lập Nguyên x Yến Nồi Cơm Điện',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Tình Ka Ngọt Ngào  Lập Nguyên x Yến Nồi Cơm ĐiệnJena Remix Bao Yêu Thương Ngọt Ngào Remix TikTok.mp3 ',
    },
    {
     song: 'Tình Sắc Muôn Màu',
     singer: 'Đỗ Lê Hồng Nhung x Ciltee',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Tình Sắc Muôn Màu  Đỗ Lê Hồng Nhung x CilTeeRemix Version by 1 9 6 7 Lyrics.mp3  '
    },
    {
     song: 'Tình Yêu Của Anh',
     singer: 'Phú Quí',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Tình Yêu Của Anh  Phú QuíCukak Remix Audio Lyrics.mp3  '
    },
    {
     song: 'Từ Ngày Gặp Em',
     singer: 'Vang Golden G',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Từ Ngày Gặp Em RIN Music Remix  Vang Golden G  Từ Ngày Gặp Em Anh Đã Có Được Nụ Cười Remix.mp3  '
    },
    {
     song: 'Vợ Tuyệt Vời Nhất',
     singer: 'Vũ Duy Khánh',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Vợ Tuyệt Vời Nhất Remix  Vũ Duy Khánh Nhật Đoàn Remix.mp3 '
    },
    {
     song: 'Vợ Tuyệt Với Nhất 2',
     singer: 'Vũ Duy Khánh',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Vợ Tuyệt Vời Nhất 2  Vũ Duy Khánh  HuyLee Remix.mp3  '
    },
    {
     song: 'Mình Cưới Thôi Anh',
     singer: 'Huỳnh Như x TVk x TRUZG',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Mình Cưới Thôi Anh Remix  Huỳnh Mộng Như x TVK x Đại Mèo  Bản Mix Cực Căng Hot tik tok.mp3 '
    },
    {
     song: 'Duy Nhất Trong Anh',
     singer: 'HOÀNG LAN X JANG NGUYỄN',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - DUY NHẤT TRONG ANH REMIX  HOÀNG LAN x JANG NGUYỄN.mp3 '
    },
    {
     song: 'Anh Cho Em Mùa Xuân',
     singer: 'H2K',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Anh Cho Em Mùa Xuân  H2KCukak Remix Audio Lyrics Video.mp3  '
    },
    {
     song: 'Muốn Em Làm Vợ Anh',
     singer: 'Vang Golden G',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Vang Golden G  Muốn Em Làm Vợ Anh  Official MV.mp3'
    },
    {
     song: 'UMEE',
     singer: 'H2K',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - UMEE  H2K THANH HUYY REMIX Thả Bầu Trời Xanh Ngát Hương Yêu Của Mình Remix Hot Tik Tok.mp3'
    },
    {
     song: 'Ghép Môi',
     singer: 'OSAD',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Ghép Môi  OSADCukak Remix Audio Lyric Video.mp3'
    },
    {
     song: 'Và Rồi Lỡ Yêu',
     singer: 'REDT ft Đỗ Lê Hồng Nhung',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Và Rồi Lỡ Yêu  REDT ft Đỗ Lê Hồng NhungYuuki Remix Audio Lyrics Video.mp3'
    },
    {
     song: 'Tỏ Tình',
     singer: 'K-ICM ft JANG NGUYEN',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - TỎ TÌNH Remix  KICM ft JANG NGUYEN   MV MP3   KrokNet.mp3'
    },
    {
     song: 'Dành Cho Em - Hekii',
     singer: 'Hoàng Tôn',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Danh Cho Em  Hekii ST Hoàng TônOrinn x Jena Remix Dành Cho Em Ngàn Câu Ca Và Thương Yêu Đó.mp3'
    },
    {
     song: 'Em So Mlem',
     singer: 'Đinh Trang',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - EM SO MLEM  Đinh Trang  Prod by CM1X.mp3'
    },
    {
     song: 'First date',
     singer: 'DPee x Zuz',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - FIRST DATE  DPee x Zuz Duzme Remix  Audio.mp3'
    },
    {
     song: 'Thế Giới Trong Em',
     singer: 'Hương Ly',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Thế Giới Trong Em  Hương Ly Cukak Remix Audio Lyric Video.mp3'
    },
    {
     song: 'Tình Đã Đầy Một Tim',
     singer: 'Huyền Tâm Môn',
     avatar: './images/1.jpg',
     mp3: './music/y2mate.com - Kết Thúc Sự Độc Thân Của Em Đi Tình Đã Đầy Một Tim  Huyền Tâm MônJena Remix Audio Lyrics Video.mp3 '
    },
]

//1. thêm số 0 vào đằng trước các số 0 đến 9
function addZero(number){
    if(number >= 0 && number <= 9) return `0${number}`
    else return number
}

//2. chuyển đổi giây thành phút và format lại 
function convertSecondsToMinutes(timeType, element = ''){
    let seconds = 0
    if(timeType === 'currentTime'){
        seconds = element.currentTime.toFixed(0)
    }else if(timeType === 'duration'){
        seconds = element.duration.toFixed(0)
    }else{
        seconds = timeType.toFixed(0)
    }
    const minutes = Math.trunc(seconds / 60)
    return  `${addZero(minutes)}:${addZero(seconds - minutes * 60)}`
}

//3. tối ưu việc random để 1 bài hát không lặp lại cho đến đã phát hết danh sách bài hát
let random = []
function randomOptimization(arr){
    const max = arr.length
    let numberRandom = Math.floor(Math.random() * max)
    
    if(random.length >= arr.length){
        random = []
    } 
        

    while(random.find(num => numberRandom == num) !== undefined){
        numberRandom = Math.floor(Math.random() * max)
    }

    random.push(numberRandom)
    return numberRandom
}

//4 lấy ra phần trăm chiều ngang của chuột và timeline
function percentTimeLine(e){
    let percent = ''
    const left = timeLine.offsetLeft
    const width = timeLine.offsetWidth
    if(clickDown && e.clientX >= left && e.clientX <= left + width){
        percent = (e.clientX - left) / width
    }else if(clickDown && e.clientX < left){
        percent = 0
    }else if(clickDown && e.clientX > left + width){
        percent = 1
    }
    
    return percent
}

//
function intervalCurrent(){
    playingTimeLeft.innerHTML = convertSecondsToMinutes('currentTime', document.querySelector('audio.active'))
    circle.style.left = document.querySelector('audio.active').currentTime / document.querySelector('audio.active').duration * 100 + '%'
    percentLine.style.width = document.querySelector('audio.active').currentTime / document.querySelector('audio.active').duration * 100 + '%'
}

const playList = document.getElementById('playlist')

//5. render danh sách phát
data.forEach((item, index) => {
    playList.insertAdjacentHTML('beforeend', `
    
    <div class="item" data-index="${index}">
    <audio class="audio${++index}" src="${item.mp3}"></audio>
    <span class="item__number">${addZero(index)}</span>
    <img src="${item.avatar}">
    <span class="oi item__icon" data-glyph="caret-right"></span>
    <div class="music">
    <div class="item__song">${item.song}</div>
    <div class="item__singer">${item.singer}</div>
    </div>
    <span class="item__time">00:00</span>
    </div>
    `)
});

//6. hiển thị thời gian bài hát của phần danh sách sau khi render xong
document.querySelectorAll('audio').forEach(audio => {
    audio.addEventListener('loadedmetadata', function(){
        audio.parentElement.querySelector('.item__time').innerHTML = convertSecondsToMinutes('duration', audio)
    })
})

 
const listAudio = document.querySelectorAll('audio')
const listItem = document.querySelectorAll('.item')
const playingImg = document.querySelector('#playing .thumbnail img')
const thumbnail = document.querySelector('#playing .thumbnail')
const playingSong = document.querySelector('#playing .song')
const playingSinger = document.querySelector('#playing .singer')
const playingTimeRight = document.querySelector('#playing .time .right')
const playingTimeLeft = document.querySelector('#playing .time .left')
const play = document.querySelector('.controls .play')
const pause = document.querySelector('.controls .pause')
const forWard = document.querySelector('.controls .forward')
const backward = document.querySelector('.controls .backward')
const timeLine = document.querySelector('#playing .time-line')
const circle = timeLine.querySelector('.circle')
const percentLine = timeLine.querySelector('.percent')
const loop = document.querySelector('.controls .loop')
const randomControl = document.querySelector('.controls .random')


listItem[0].classList.add('active')
listAudio[0].classList.add('active')

let currentTime = ''

//7. khi nhấn bài bài hát
listItem.forEach(item => {
    item.addEventListener('click', function(){

        thumbnail.classList.remove('pause')
        thumbnail.classList.remove('play')
        
        //6.1 hiệu ứng active 
        document.querySelector('.item.active').classList.remove('active')
        item.classList.add('active')

        //6.2 dừng audio đang phát vào đặt thời gian về 0
        document.querySelector('audio.active').pause()
        document.querySelector('audio.active').currentTime = 0

        //6.3 xóa, thêm class active cho audio
        document.querySelector('audio.active').classList.remove('active')
        item.querySelector('audio').classList.add('active')
        
        //6.4 hiệu ứng thay đổi ảnh, bài hát, ca sĩ, thời gian
        playingImg.setAttribute('src', item.querySelector('img').getAttribute('src'))
        playingSong.innerHTML = item.querySelector('.item__song').innerHTML
        playingSinger.innerHTML = item.querySelector('.item__singer').innerHTML
        playingTimeRight.innerHTML = item.querySelector('.item__time').innerHTML

        //6.5 hiệu ứng cuộn, clearInterval, xóa class active của loop
        item.scrollIntoView({behavior: "smooth", block: "center"})
        clearInterval(currentTime)
        loop.classList.remove('active')

        play.click()
    })
})

//8. khi ấn play
play.addEventListener('click', function(){
    forWard.style.pointerEvents = 'all'

    thumbnail.classList.remove('pause')
    thumbnail.classList.add('play')

    //8.1 hiệu ứng đổi sang pause
    play.style.display = 'none'
    pause.style.display = 'block'
    
    //8.2 phát audio đang active
    document.querySelector('audio.active').play()
    
    //8.3 hiệu ứng thời giạn hiện tại của bài hát
    currentTime =  setInterval(()=>{
        intervalCurrent()
    }, 100)

    //8.4 khi audio active kết thúc
    document.querySelector('audio.active').onended = function(){
        clearInterval(currentTime)
        
        // nếu ấn chọn loop
        if(loop.classList.contains('active')){
            play.click()
        // mặc định phát bài tiếp theo
        }else{
            forWard.click()
        }
    }
    

})

//9. khi ấn pause
pause.addEventListener('click', function(){
    pause.style.display = 'none'
    play.style.display = 'block'

    thumbnail.classList.remove('play')
    thumbnail.classList.add('pause')

    clearInterval(currentTime)
    document.querySelector('audio.active').pause()
})

//10. khi ấn forWard
forWard.addEventListener('click', function(){
    // nếu ấn chọn random
    if(randomControl.classList.contains('active'))
    {
        listItem[randomOptimization(listItem)].click()
    }
    else
    {
        const nextItem = document.querySelector('.item.active').nextElementSibling
        if(nextItem){
            nextItem.click()
        }else{
            pause.click()
            this.style.pointerEvents = 'none'
        }
    }
})

//11. khi ấn backWard
backward.addEventListener('click', function(){
    if(randomControl.classList.contains('active'))
    {
        if(document.querySelector('audio.active').currentTime <= 3){
            listItem[randomOptimization(listItem)].click()
        }else{
            document.querySelector('audio.active').currentTime = 0
        }
    }
    else
    {
        const prevItem = document.querySelector('.item.active').previousElementSibling
        if(prevItem && document.querySelector('audio.active').currentTime <= 3){
            prevItem.click()
        }else{
            document.querySelector('audio.active').currentTime = 0
        }
    }
    
})

let clickDown = false

//12. hiệu ứng kéo thả time line
window.addEventListener('mousedown', function(e){
    if(e.target.matches('.circle') || e.target.matches('.time-line') || e.target.matches('.percent')){
        clickDown = true
        clearInterval(currentTime)
    }
})

window.addEventListener('mousemove', function(e){
    this.document.body.style.userSelect = 'none'

    let percent = percentTimeLine(e)

    if(clickDown){
        clearInterval(currentTime)
        playingTimeLeft.innerHTML =  convertSecondsToMinutes(percent * document.querySelector('audio.active').duration)
        circle.style.left = percent * 100 + '%'
        percentLine.style.width = percent * 100 + '%'
    }
    
})

window.addEventListener('mouseup', function(e){
    if(clickDown){
        document.querySelector('audio.active').currentTime = percentTimeLine(e) * document.querySelector('audio.active').duration
        currentTime =  setInterval(()=>{
            intervalCurrent()
        }, 100)
        clickDown = false
    }
})

timeLine.addEventListener('click', function(){
    intervalCurrent()
})


//13. khi ấn vào loop
loop.addEventListener('click', function(){
    randomControl.classList.remove('active')
    this.classList.toggle('active')
})

//14. khi ấn vào random
randomControl.addEventListener('click', function(){
    loop.classList.remove('active')
    this.classList.toggle('active')
    random = []
    if(this.classList.contains('active')){
        random.push(document.querySelector('.item.active').dataset.index)
    }
})

thumbnail.addEventListener('animationend', function(e){
    if(e.animationName === 'rotatePause'){
        thumbnail.classList.remove('pause')
        this.style.borderRadius = '20px'
    }
})
